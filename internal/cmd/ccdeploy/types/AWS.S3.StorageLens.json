{
    "Arn": "arn:aws:cloudformation:us-east-1::type/resource/AWS-S3-StorageLens",
    "Type": "RESOURCE",
    "TypeName": "AWS::S3::StorageLens",
    "IsDefaultVersion": true,
    "Description": "The AWS::S3::StorageLens resource is an Amazon S3 resource type that you can use to create Storage Lens configurations.",
    "Schema": "{\n  \"typeName\": \"AWS::S3::StorageLens\",\n  \"description\": \"The AWS::S3::StorageLens resource is an Amazon S3 resource type that you can use to create Storage Lens configurations.\",\n  \"sourceUrl\": \"https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-s3-storagelens\",\n  \"definitions\": {\n    \"Id\": {\n      \"description\": \"The ID that identifies the Amazon S3 Storage Lens configuration.\",\n      \"type\": \"string\",\n      \"minLength\": 1,\n      \"maxLength\": 64,\n      \"pattern\": \"^[a-zA-Z0-9\\\\-_.]+$\"\n    },\n    \"Arn\": {\n      \"description\": \"The Amazon Resource Name (ARN) of the specified resource.\",\n      \"type\": \"string\"\n    },\n    \"BucketsAndRegions\": {\n      \"description\": \"S3 buckets and Regions to include/exclude in the Amazon S3 Storage Lens configuration.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"Buckets\": {\n          \"type\": \"array\",\n          \"insertionOrder\": false,\n          \"uniqueItems\": true,\n          \"items\": {\n            \"$ref\": \"#/definitions/Arn\"\n          }\n        },\n        \"Regions\": {\n          \"type\": \"array\",\n          \"insertionOrder\": false,\n          \"uniqueItems\": true,\n          \"items\": {\n            \"type\": \"string\",\n            \"description\": \"An AWS Region.\"\n          }\n        }\n      }\n    },\n    \"AwsOrg\": {\n      \"description\": \"The AWS Organizations ARN to use in the Amazon S3 Storage Lens configuration.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"Arn\": {\n          \"$ref\": \"#/definitions/Arn\"\n        }\n      },\n      \"required\": [\n        \"Arn\"\n      ]\n    },\n    \"ActivityMetrics\": {\n      \"description\": \"Enables activity metrics.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether activity metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"AdvancedCostOptimizationMetrics\": {\n      \"description\": \"Enables advanced cost optimization metrics.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether advanced cost optimization metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"AdvancedDataProtectionMetrics\": {\n      \"description\": \"Enables advanced data protection metrics.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether advanced data protection metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"DetailedStatusCodesMetrics\": {\n      \"description\": \"Enables detailed status codes metrics.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether detailed status codes metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"SelectionCriteria\": {\n      \"description\": \"Selection criteria for prefix-level metrics.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"MaxDepth\": {\n          \"description\": \"Max depth of prefixes of S3 key that Amazon S3 Storage Lens will analyze.\",\n          \"type\": \"integer\"\n        },\n        \"Delimiter\": {\n          \"description\": \"Delimiter to divide S3 key into hierarchy of prefixes.\",\n          \"type\": \"string\"\n        },\n        \"MinStorageBytesPercentage\": {\n          \"description\": \"The minimum storage bytes threshold for the prefixes to be included in the analysis.\",\n          \"type\": \"number\"\n        }\n      }\n    },\n    \"PrefixLevelStorageMetrics\": {\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether prefix-level storage metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        },\n        \"SelectionCriteria\": {\n          \"$ref\": \"#/definitions/SelectionCriteria\"\n        }\n      }\n    },\n    \"PrefixLevel\": {\n      \"description\": \"Prefix-level metrics configurations.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"StorageMetrics\": {\n          \"$ref\": \"#/definitions/PrefixLevelStorageMetrics\"\n        }\n      },\n      \"required\": [\n        \"StorageMetrics\"\n      ]\n    },\n    \"BucketLevel\": {\n      \"description\": \"Bucket-level metrics configurations.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"ActivityMetrics\": {\n          \"$ref\": \"#/definitions/ActivityMetrics\"\n        },\n        \"AdvancedCostOptimizationMetrics\": {\n          \"$ref\": \"#/definitions/AdvancedCostOptimizationMetrics\"\n        },\n        \"AdvancedDataProtectionMetrics\": {\n          \"$ref\": \"#/definitions/AdvancedDataProtectionMetrics\"\n        },\n        \"DetailedStatusCodesMetrics\": {\n          \"$ref\": \"#/definitions/DetailedStatusCodesMetrics\"\n        },\n        \"PrefixLevel\": {\n          \"$ref\": \"#/definitions/PrefixLevel\"\n        }\n      }\n    },\n    \"AccountLevel\": {\n      \"description\": \"Account-level metrics configurations.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"ActivityMetrics\": {\n          \"$ref\": \"#/definitions/ActivityMetrics\"\n        },\n        \"AdvancedCostOptimizationMetrics\": {\n          \"$ref\": \"#/definitions/AdvancedCostOptimizationMetrics\"\n        },\n        \"AdvancedDataProtectionMetrics\": {\n          \"$ref\": \"#/definitions/AdvancedDataProtectionMetrics\"\n        },\n        \"DetailedStatusCodesMetrics\": {\n          \"$ref\": \"#/definitions/DetailedStatusCodesMetrics\"\n        },\n        \"BucketLevel\": {\n          \"$ref\": \"#/definitions/BucketLevel\"\n        }\n      },\n      \"required\": [\n        \"BucketLevel\"\n      ]\n    },\n    \"SSEKMS\": {\n      \"description\": \"AWS KMS server-side encryption.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"KeyId\": {\n          \"description\": \"The ARN of the KMS key to use for encryption.\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"KeyId\"\n      ]\n    },\n    \"Encryption\": {\n      \"description\": \"Configures the server-side encryption for Amazon S3 Storage Lens report files with either S3-managed keys (SSE-S3) or KMS-managed keys (SSE-KMS).\",\n      \"type\": \"object\",\n      \"oneOf\": [\n        {\n          \"additionalProperties\": false,\n          \"properties\": {\n            \"SSES3\": {\n              \"description\": \"S3 default server-side encryption.\",\n              \"type\": \"object\",\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"SSES3\"\n          ]\n        },\n        {\n          \"additionalProperties\": false,\n          \"properties\": {\n            \"SSEKMS\": {\n              \"$ref\": \"#/definitions/SSEKMS\"\n            }\n          },\n          \"required\": [\n            \"SSEKMS\"\n          ]\n        }\n      ]\n    },\n    \"S3BucketDestination\": {\n      \"description\": \"S3 bucket destination settings for the Amazon S3 Storage Lens metrics export.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"OutputSchemaVersion\": {\n          \"description\": \"The version of the output schema to use when exporting Amazon S3 Storage Lens metrics.\",\n          \"type\": \"string\",\n          \"enum\": [\n            \"V_1\"\n          ]\n        },\n        \"Format\": {\n          \"description\": \"Specifies the file format to use when exporting Amazon S3 Storage Lens metrics export.\",\n          \"type\": \"string\",\n          \"enum\": [\n            \"CSV\",\n            \"Parquet\"\n          ]\n        },\n        \"AccountId\": {\n          \"description\": \"The AWS account ID that owns the destination S3 bucket.\",\n          \"type\": \"string\"\n        },\n        \"Arn\": {\n          \"description\": \"The ARN of the bucket to which Amazon S3 Storage Lens exports will be placed.\",\n          \"type\": \"string\"\n        },\n        \"Prefix\": {\n          \"description\": \"The prefix to use for Amazon S3 Storage Lens export.\",\n          \"type\": \"string\"\n        },\n        \"Encryption\": {\n          \"$ref\": \"#/definitions/Encryption\"\n        }\n      },\n      \"required\": [\n        \"OutputSchemaVersion\",\n        \"Format\",\n        \"AccountId\",\n        \"Arn\"\n      ]\n    },\n    \"CloudWatchMetrics\": {\n      \"description\": \"CloudWatch metrics settings for the Amazon S3 Storage Lens metrics export.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether CloudWatch metrics are enabled or disabled.\",\n          \"type\": \"boolean\"\n        }\n      },\n      \"required\": [\n        \"IsEnabled\"\n      ]\n    },\n    \"DataExport\": {\n      \"description\": \"Specifies how Amazon S3 Storage Lens metrics should be exported.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"S3BucketDestination\": {\n          \"$ref\": \"#/definitions/S3BucketDestination\"\n        },\n        \"CloudWatchMetrics\": {\n          \"$ref\": \"#/definitions/CloudWatchMetrics\"\n        }\n      }\n    },\n    \"Tag\": {\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"Key\": {\n          \"type\": \"string\",\n          \"minLength\": 1,\n          \"maxLength\": 127,\n          \"pattern\": \"^(?!aws:.*)[a-zA-Z0-9\\\\s\\\\_\\\\.\\\\/\\\\=\\\\+\\\\-]+$\"\n        },\n        \"Value\": {\n          \"type\": \"string\",\n          \"minLength\": 1,\n          \"maxLength\": 255,\n          \"pattern\": \"^(?!aws:.*)[a-zA-Z0-9\\\\s\\\\_\\\\.\\\\/\\\\=\\\\+\\\\-\\\\@]+$\"\n        }\n      },\n      \"required\": [\n        \"Key\",\n        \"Value\"\n      ]\n    },\n    \"StorageLensConfiguration\": {\n      \"description\": \"Specifies the details of Amazon S3 Storage Lens configuration.\",\n      \"type\": \"object\",\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"Id\": {\n          \"$ref\": \"#/definitions/Id\"\n        },\n        \"Include\": {\n          \"$ref\": \"#/definitions/BucketsAndRegions\"\n        },\n        \"Exclude\": {\n          \"$ref\": \"#/definitions/BucketsAndRegions\"\n        },\n        \"AwsOrg\": {\n          \"$ref\": \"#/definitions/AwsOrg\"\n        },\n        \"AccountLevel\": {\n          \"$ref\": \"#/definitions/AccountLevel\"\n        },\n        \"DataExport\": {\n          \"$ref\": \"#/definitions/DataExport\"\n        },\n        \"IsEnabled\": {\n          \"description\": \"Specifies whether the Amazon S3 Storage Lens configuration is enabled or disabled.\",\n          \"type\": \"boolean\"\n        },\n        \"StorageLensArn\": {\n          \"description\": \"The ARN for the Amazon S3 Storage Lens configuration.\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"Id\",\n        \"AccountLevel\",\n        \"IsEnabled\"\n      ]\n    }\n  },\n  \"properties\": {\n    \"StorageLensConfiguration\": {\n      \"$ref\": \"#/definitions/StorageLensConfiguration\"\n    },\n    \"Tags\": {\n      \"description\": \"A set of tags (key-value pairs) for this Amazon S3 Storage Lens configuration.\",\n      \"type\": \"array\",\n      \"insertionOrder\": false,\n      \"uniqueItems\": true,\n      \"items\": {\n        \"$ref\": \"#/definitions/Tag\"\n      },\n      \"maxItems\": 50\n    }\n  },\n  \"additionalProperties\": false,\n  \"required\": [\n    \"StorageLensConfiguration\"\n  ],\n  \"readOnlyProperties\": [\n    \"/properties/StorageLensConfiguration/StorageLensArn\"\n  ],\n  \"createOnlyProperties\": [\n    \"/properties/StorageLensConfiguration/Id\"\n  ],\n  \"primaryIdentifier\": [\n    \"/properties/StorageLensConfiguration/Id\"\n  ],\n  \"handlers\": {\n    \"create\": {\n      \"permissions\": [\n        \"s3:PutStorageLensConfiguration\",\n        \"s3:PutStorageLensConfigurationTagging\",\n        \"s3:GetStorageLensConfiguration\",\n        \"s3:GetStorageLensConfigurationTagging\",\n        \"organizations:DescribeOrganization\",\n        \"organizations:ListAccounts\",\n        \"organizations:ListAWSServiceAccessForOrganization\",\n        \"organizations:ListDelegatedAdministrators\",\n        \"iam:CreateServiceLinkedRole\"\n      ]\n    },\n    \"read\": {\n      \"permissions\": [\n        \"s3:GetStorageLensConfiguration\",\n        \"s3:GetStorageLensConfigurationTagging\"\n      ]\n    },\n    \"update\": {\n      \"permissions\": [\n        \"s3:PutStorageLensConfiguration\",\n        \"s3:PutStorageLensConfigurationTagging\",\n        \"s3:GetStorageLensConfiguration\",\n        \"s3:GetStorageLensConfigurationTagging\",\n        \"organizations:DescribeOrganization\",\n        \"organizations:ListAccounts\",\n        \"organizations:ListAWSServiceAccessForOrganization\",\n        \"organizations:ListDelegatedAdministrators\",\n        \"iam:CreateServiceLinkedRole\"\n      ]\n    },\n    \"delete\": {\n      \"permissions\": [\n        \"s3:DeleteStorageLensConfiguration\",\n        \"s3:DeleteStorageLensConfigurationTagging\"\n      ]\n    },\n    \"list\": {\n      \"permissions\": [\n        \"s3:ListStorageLensConfigurations\"\n      ]\n    }\n  }\n}\n",
    "ProvisioningType": "FULLY_MUTABLE",
    "DeprecatedStatus": "LIVE",
    "Visibility": "PUBLIC",
    "SourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-s3-storagelens",
    "TimeCreated": "2020-11-04T19:28:33.932000+00:00"
}
