/// AWS::ApplicationInsights::Application
///
/// Generated by rain build --pkl-class AWS::ApplicationInsights::Application
module aws.applicationinsights.application

import "../../cloudformation.pkl"

/// The NetWeaver Prometheus Exporter Settings.
open class NetWeaverPrometheusExporter {
    SAPSID: String|Mapping
    InstanceNumbers: Listing<String|Mapping>
    PrometheusPort: (String|Mapping)?
}

/// A Windows Event to be monitored for the component.
open class WindowsEvent {
    EventLevels: Listing<EventLevel>
    PatternSet: (String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping)?
    LogGroupName: String(matches(Regex(#"[\.\-_/#A-Za-z0-9]+"#)))|Mapping
    EventName: String(matches(Regex(#"^[a-zA-Z0-9_ \\/-]+$"#)))|Mapping
}

typealias AlarmSeverity = "HIGH"|"MEDIUM"|"LOW"

/// A CloudWatch alarm to be monitored for the component.
open class Alarm {
    AlarmName: String|Mapping
    Severity: (AlarmSeverity|Mapping)?
}

/// The log pattern.
open class LogPattern {
    PatternName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping
    Pattern: String|Mapping
    Rank: Int|Mapping
}

typealias ComponentMonitoringSettingComponentConfigurationMode = "DEFAULT"|"DEFAULT_WITH_OVERWRITE"|"CUSTOM"

/// The monitoring setting of the component.
open class ComponentMonitoringSetting {
    Tier: String(matches(Regex(#"^[A-Z][[A-Z]_]*$"#)))|Mapping
    ComponentConfigurationMode: ComponentMonitoringSettingComponentConfigurationMode|Mapping
    DefaultOverwriteComponentConfiguration: (ComponentConfiguration)?
    CustomComponentConfiguration: (ComponentConfiguration)?
    ComponentName: (String(matches(Regex(#"^[\d\w\-_.+]*$"#)))|Mapping)?
    ComponentARN: (String(matches(Regex(#"^arn:aws(-[\w]+)*:[\w\d-]+:([\w\d-]*)?:[\w\d_-]*([:/].+)*$"#)))|Mapping)?
}

/// The configuration settings of sub components.
open class SubComponentConfigurationDetails {
    Processes: (Listing<Process>)?
    AlarmMetrics: (Listing<AlarmMetric>)?
    Logs: (Listing<Log>)?
    WindowsEvents: (Listing<WindowsEvent>)?
}

/// The HA cluster Prometheus Exporter settings.
open class HAClusterPrometheusExporter {
    PrometheusPort: (String|Mapping)?
}

typealias LogEncoding = "utf-8"|"utf-16"|"ascii"

/// A log to be monitored for the component.
open class Log {
    LogGroupName: (String(matches(Regex(#"[\.\-_/#A-Za-z0-9]+"#)))|Mapping)?
    LogPath: (String(matches(Regex(#"^([a-zA-Z]:\\[\\\S|*\S]?.*|/[^"']*)$"#)))|Mapping)?
    LogType: String(matches(Regex(#"^[A-Z][[A-Z]_]*$"#)))|Mapping
    Encoding: (LogEncoding|Mapping)?
    PatternSet: (String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping)?
}

/// A process to be monitored for the component.
open class Process {
    ProcessName: String(matches(Regex(#"^[a-zA-Z0-9_,-]+$"#)))|Mapping
    AlarmMetrics: Listing<AlarmMetric>
}

/// A key-value pair to associate with a resource.
open class Tag {
    Value: String|Mapping
    Key: String|Mapping
}

/// The custom grouped component.
open class CustomComponent {
    ComponentName: String(matches(Regex(#"^[\d\w\-_.+]*$"#)))|Mapping
    ResourceList: Listing<String|Mapping>
}

/// The JMX Prometheus Exporter settings.
open class JMXPrometheusExporter {
    PrometheusPort: (String|Mapping)?
    JMXURL: (String|Mapping)?
    HostPort: (String|Mapping)?
}

/// A metric to be monitored for the component.
open class AlarmMetric {
    AlarmMetricName: String|Mapping
}

/// The configuration settings.
open class ConfigurationDetails {
    WindowsEvents: (Listing<WindowsEvent>)?
    Processes: (Listing<Process>)?
    Alarms: (Listing<Alarm>)?
    JMXPrometheusExporter: (JMXPrometheusExporter)?
    HANAPrometheusExporter: (HANAPrometheusExporter)?
    NetWeaverPrometheusExporter: (NetWeaverPrometheusExporter)?
    SQLServerPrometheusExporter: (SQLServerPrometheusExporter)?
    AlarmMetrics: (Listing<AlarmMetric>)?
    HAClusterPrometheusExporter: (HAClusterPrometheusExporter)?
    Logs: (Listing<Log>)?
}

/// The SQL prometheus exporter settings.
open class SQLServerPrometheusExporter {
    PrometheusPort: String|Mapping
    SQLSecretName: String|Mapping
}

/// The level of event to log.
open class EventLevel {
}

/// The log pattern set.
open class LogPatternSet {
    PatternSetName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping
    LogPatterns: Listing<LogPattern>
}

/// The configuration settings of the component.
open class ComponentConfiguration {
    ConfigurationDetails: (ConfigurationDetails)?
    SubComponentTypeConfigurations: (Listing<SubComponentTypeConfiguration>)?
}

/// The HANA DB Prometheus Exporter settings.
open class HANAPrometheusExporter {
    HANASID: String|Mapping
    HANAPort: String|Mapping
    HANASecretName: String|Mapping
    AgreeToInstallHANADBClient: Boolean|Mapping
    PrometheusPort: (String|Mapping)?
}

typealias SubComponentTypeConfigurationSubComponentType = "AWS::EC2::Instance"|"AWS::EC2::Volume"

/// One type sub component configurations for the component.
open class SubComponentTypeConfiguration {
    SubComponentType: SubComponentTypeConfigurationSubComponentType|Mapping
    SubComponentConfigurationDetails: SubComponentConfigurationDetails
}

/// Resource schema for AWS::ApplicationInsights::Application
open class Application extends cloudformation.Resource {

    Type = "AWS::ApplicationInsights::Application"


    /// The tags of Application Insights application.
    hidden Tags: (Listing<Tag>)?

    /// The log pattern sets.
    hidden LogPatternSets: (Listing<LogPatternSet>)?

    /// If set to true, the managed policies for SSM and CW will be attached to the instance roles if they are missing
    hidden AttachMissingPermission: (Boolean|Mapping)?

    /// The name of the resource group.
    hidden ResourceGroupName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping

    /// Indicates whether Application Insights can listen to CloudWatch events for the application resources.
    hidden CWEMonitorEnabled: (Boolean|Mapping)?

    /// The SNS topic provided to Application Insights that is associated to the created opsItem.
    hidden OpsItemSNSTopicArn: (String(matches(Regex(#"^arn:aws(-[\w]+)*:[\w\d-]+:([\w\d-]*)?:[\w\d_-]*([:/].+)*$"#)))|Mapping)?

    /// The grouping type of the application
    hidden GroupingType: (ApplicationGroupingType|Mapping)?

    /// When set to true, creates opsItems for any problems detected on an application.
    hidden OpsCenterEnabled: (Boolean|Mapping)?

    /// The custom grouped components.
    hidden CustomComponents: (Listing<CustomComponent>)?

    /// If set to true, application will be configured with recommended monitoring configuration.
    hidden AutoConfigurationEnabled: (Boolean|Mapping)?

    /// The monitoring settings of the components.
    hidden ComponentMonitoringSettings: (Listing<ComponentMonitoringSetting>)?

    Properties {
        ["Tags"] = if (Tags == null) null else Tags
        ["LogPatternSets"] = if (LogPatternSets == null) null else LogPatternSets
        ["AttachMissingPermission"] = if (AttachMissingPermission == null) null else AttachMissingPermission
        ["ResourceGroupName"] = if (ResourceGroupName == null) null else ResourceGroupName
        ["CWEMonitorEnabled"] = if (CWEMonitorEnabled == null) null else CWEMonitorEnabled
        ["OpsItemSNSTopicArn"] = if (OpsItemSNSTopicArn == null) null else OpsItemSNSTopicArn
        ["GroupingType"] = if (GroupingType == null) null else GroupingType
        ["OpsCenterEnabled"] = if (OpsCenterEnabled == null) null else OpsCenterEnabled
        ["CustomComponents"] = if (CustomComponents == null) null else CustomComponents
        ["AutoConfigurationEnabled"] = if (AutoConfigurationEnabled == null) null else AutoConfigurationEnabled
        ["ComponentMonitoringSettings"] = if (ComponentMonitoringSettings == null) null else ComponentMonitoringSettings
    }

}


typealias ApplicationGroupingType = "ACCOUNT_BASED"
