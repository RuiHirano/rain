/// AWS::ApplicationInsights::Application
///
/// Generated by rain build --pkl-class AWS::ApplicationInsights::Application
module aws.applicationinsights.application

import "../../cloudformation.pkl"

/// The JMX Prometheus Exporter settings.
open class ApplicationJMXPrometheusExporter {
    JMXURL: (String|Mapping)?
    HostPort: (String|Mapping)?
    PrometheusPort: (String|Mapping)?
}

/// A key-value pair to associate with a resource.
open class ApplicationTag {
    Value: String|Mapping
    Key: String|Mapping
}

/// The SQL prometheus exporter settings.
open class ApplicationSQLServerPrometheusExporter {
    PrometheusPort: String|Mapping
    SQLSecretName: String|Mapping
}

/// A Windows Event to be monitored for the component.
open class ApplicationWindowsEvent {
    LogGroupName: String(matches(Regex(#"[\.\-_/#A-Za-z0-9]+"#)))|Mapping
    EventName: String(matches(Regex(#"^[a-zA-Z0-9_ \\/-]+$"#)))|Mapping
    EventLevels: Listing<ApplicationEventLevel>
    PatternSet: (String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping)?
}

/// The configuration settings of the component.
open class ApplicationComponentConfiguration {
    SubComponentTypeConfigurations: (Listing<ApplicationSubComponentTypeConfiguration>)?
    ConfigurationDetails: (ApplicationConfigurationDetails)?
}

typealias AlarmSeverity = "HIGH"|"MEDIUM"|"LOW"

/// A CloudWatch alarm to be monitored for the component.
open class ApplicationAlarm {
    Severity: (AlarmSeverity|Mapping)?
    AlarmName: String|Mapping
}

typealias SubComponentTypeConfigurationSubComponentType = "AWS::EC2::Instance"|"AWS::EC2::Volume"

/// One type sub component configurations for the component.
open class ApplicationSubComponentTypeConfiguration {
    SubComponentType: SubComponentTypeConfigurationSubComponentType|Mapping
    SubComponentConfigurationDetails: ApplicationSubComponentConfigurationDetails
}

typealias ComponentMonitoringSettingComponentConfigurationMode = "DEFAULT"|"DEFAULT_WITH_OVERWRITE"|"CUSTOM"

/// The monitoring setting of the component.
open class ApplicationComponentMonitoringSetting {
    CustomComponentConfiguration: (ApplicationComponentConfiguration)?
    ComponentName: (String(matches(Regex(#"^[\d\w\-_.+]*$"#)))|Mapping)?
    ComponentARN: (String(matches(Regex(#"^arn:aws(-[\w]+)*:[\w\d-]+:([\w\d-]*)?:[\w\d_-]*([:/].+)*$"#)))|Mapping)?
    Tier: String(matches(Regex(#"^[A-Z][[A-Z]_]*$"#)))|Mapping
    ComponentConfigurationMode: ComponentMonitoringSettingComponentConfigurationMode|Mapping
    DefaultOverwriteComponentConfiguration: (ApplicationComponentConfiguration)?
}

/// The HA cluster Prometheus Exporter settings.
open class ApplicationHAClusterPrometheusExporter {
    PrometheusPort: (String|Mapping)?
}

/// A metric to be monitored for the component.
open class ApplicationAlarmMetric {
    AlarmMetricName: String|Mapping
}

typealias ApplicationEventLevel = String|Mapping


/// The log pattern.
open class ApplicationLogPattern {
    PatternName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping
    Pattern: String|Mapping
    Rank: Int|Mapping
}

/// The log pattern set.
open class ApplicationLogPatternSet {
    PatternSetName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping
    LogPatterns: Listing<ApplicationLogPattern>
}

typealias LogEncoding = "utf-8"|"utf-16"|"ascii"

/// A log to be monitored for the component.
open class ApplicationLog {
    LogPath: (String(matches(Regex(#"^([a-zA-Z]:\\[\\\S|*\S]?.*|/[^"']*)$"#)))|Mapping)?
    LogType: String(matches(Regex(#"^[A-Z][[A-Z]_]*$"#)))|Mapping
    Encoding: (LogEncoding|Mapping)?
    PatternSet: (String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping)?
    LogGroupName: (String(matches(Regex(#"[\.\-_/#A-Za-z0-9]+"#)))|Mapping)?
}

/// The NetWeaver Prometheus Exporter Settings.
open class ApplicationNetWeaverPrometheusExporter {
    SAPSID: String|Mapping
    InstanceNumbers: Listing<String|Mapping>
    PrometheusPort: (String|Mapping)?
}

/// The HANA DB Prometheus Exporter settings.
open class ApplicationHANAPrometheusExporter {
    AgreeToInstallHANADBClient: Boolean|Mapping
    PrometheusPort: (String|Mapping)?
    HANASID: String|Mapping
    HANAPort: String|Mapping
    HANASecretName: String|Mapping
}

/// A process to be monitored for the component.
open class ApplicationProcess {
    ProcessName: String(matches(Regex(#"^[a-zA-Z0-9_,-]+$"#)))|Mapping
    AlarmMetrics: Listing<ApplicationAlarmMetric>
}

/// The configuration settings.
open class ApplicationConfigurationDetails {
    JMXPrometheusExporter: (ApplicationJMXPrometheusExporter)?
    HAClusterPrometheusExporter: (ApplicationHAClusterPrometheusExporter)?
    NetWeaverPrometheusExporter: (ApplicationNetWeaverPrometheusExporter)?
    SQLServerPrometheusExporter: (ApplicationSQLServerPrometheusExporter)?
    AlarmMetrics: (Listing<ApplicationAlarmMetric>)?
    Logs: (Listing<ApplicationLog>)?
    Alarms: (Listing<ApplicationAlarm>)?
    HANAPrometheusExporter: (ApplicationHANAPrometheusExporter)?
    WindowsEvents: (Listing<ApplicationWindowsEvent>)?
    Processes: (Listing<ApplicationProcess>)?
}

/// The custom grouped component.
open class ApplicationCustomComponent {
    ComponentName: String(matches(Regex(#"^[\d\w\-_.+]*$"#)))|Mapping
    ResourceList: Listing<String|Mapping>
}

/// The configuration settings of sub components.
open class ApplicationSubComponentConfigurationDetails {
    AlarmMetrics: (Listing<ApplicationAlarmMetric>)?
    Logs: (Listing<ApplicationLog>)?
    WindowsEvents: (Listing<ApplicationWindowsEvent>)?
    Processes: (Listing<ApplicationProcess>)?
}

/// Resource schema for AWS::ApplicationInsights::Application
open class Application extends cloudformation.Resource {

    Type = "AWS::ApplicationInsights::Application"


    /// The tags of Application Insights application.
    hidden Tags: (Listing<ApplicationTag>)?

    /// The custom grouped components.
    hidden CustomComponents: (Listing<ApplicationCustomComponent>)?

    /// The monitoring settings of the components.
    hidden ComponentMonitoringSettings: (Listing<ApplicationComponentMonitoringSetting>)?

    /// The grouping type of the application
    hidden GroupingType: (ApplicationGroupingType|Mapping)?

    /// The name of the resource group.
    hidden ResourceGroupName: String(matches(Regex(#"[a-zA-Z0-9.-_]*"#)))|Mapping

    /// Indicates whether Application Insights can listen to CloudWatch events for the application resources.
    hidden CWEMonitorEnabled: (Boolean|Mapping)?

    /// When set to true, creates opsItems for any problems detected on an application.
    hidden OpsCenterEnabled: (Boolean|Mapping)?

    /// If set to true, application will be configured with recommended monitoring configuration.
    hidden AutoConfigurationEnabled: (Boolean|Mapping)?

    /// If set to true, the managed policies for SSM and CW will be attached to the instance roles if they are missing
    hidden AttachMissingPermission: (Boolean|Mapping)?

    /// The SNS topic provided to Application Insights that is associated to the created opsItem.
    hidden OpsItemSNSTopicArn: (String(matches(Regex(#"^arn:aws(-[\w]+)*:[\w\d-]+:([\w\d-]*)?:[\w\d_-]*([:/].+)*$"#)))|Mapping)?

    /// The log pattern sets.
    hidden LogPatternSets: (Listing<ApplicationLogPatternSet>)?

    Properties {
        ["Tags"] = if (Tags == null) null else Tags
        ["CustomComponents"] = if (CustomComponents == null) null else CustomComponents
        ["ComponentMonitoringSettings"] = if (ComponentMonitoringSettings == null) null else ComponentMonitoringSettings
        ["GroupingType"] = if (GroupingType == null) null else GroupingType
        ["ResourceGroupName"] = if (ResourceGroupName == null) null else ResourceGroupName
        ["CWEMonitorEnabled"] = if (CWEMonitorEnabled == null) null else CWEMonitorEnabled
        ["OpsCenterEnabled"] = if (OpsCenterEnabled == null) null else OpsCenterEnabled
        ["AutoConfigurationEnabled"] = if (AutoConfigurationEnabled == null) null else AutoConfigurationEnabled
        ["AttachMissingPermission"] = if (AttachMissingPermission == null) null else AttachMissingPermission
        ["OpsItemSNSTopicArn"] = if (OpsItemSNSTopicArn == null) null else OpsItemSNSTopicArn
        ["LogPatternSets"] = if (LogPatternSets == null) null else LogPatternSets
    }

}


typealias ApplicationGroupingType = "ACCOUNT_BASED"
