/// AWS::ImageBuilder::ImagePipeline
///
/// Generated by rain build --pkl-class AWS::ImageBuilder::ImagePipeline
module aws.imagebuilder.imagepipeline

import "../../cloudformation.pkl"

typealias WorkflowConfigurationOnFailure = "CONTINUE"|"ABORT"

/// The workflow configuration of the image
open class ImagePipelineWorkflowConfiguration {
    OnFailure: (WorkflowConfigurationOnFailure|Mapping)?
    WorkflowArn: (String|Mapping)?
    Parameters: (Listing<ImagePipelineWorkflowParameter>)?
    ParallelGroup: (String|Mapping)?
}

/// A parameter associated with the workflow
open class ImagePipelineWorkflowParameter {
    Name: (String|Mapping)?
    Value: (Listing<ImagePipelineWorkflowParameterValue>)?
}

typealias ImagePipelineWorkflowParameterValue = String|Mapping


/// Image tests configuration.
open class ImagePipelineImageTestsConfiguration {
    ImageTestsEnabled: (Boolean|Mapping)?
    TimeoutMinutes: (Int|Mapping)?
}

/// Determines if tests should run after building the image. Image Builder defaults to enable tests to run following the image build, before image distribution.
open class ImagePipelineImageScanningConfiguration {
    EcrConfiguration: (ImagePipelineEcrConfiguration)?
    ImageScanningEnabled: (Boolean|Mapping)?
}

/// Settings for Image Builder to configure the ECR repository and output container images that are scanned.
open class ImagePipelineEcrConfiguration {
    ContainerTags: (Listing<String|Mapping>)?
    RepositoryName: (String|Mapping)?
}

typealias SchedulePipelineExecutionStartCondition = "EXPRESSION_MATCH_ONLY"|"EXPRESSION_MATCH_AND_DEPENDENCY_UPDATES_AVAILABLE"

/// The schedule of the image pipeline.
open class ImagePipelineSchedule {
    PipelineExecutionStartCondition: (SchedulePipelineExecutionStartCondition|Mapping)?
    ScheduleExpression: (String|Mapping)?
}

/// Resource schema for AWS::ImageBuilder::ImagePipeline
open class ImagePipeline extends cloudformation.Resource {

    Type = "AWS::ImageBuilder::ImagePipeline"


    /// The Amazon Resource Name (ARN) of the infrastructure configuration associated with this image pipeline.
    hidden InfrastructureConfigurationArn: (String|Mapping)?

    /// Contains settings for vulnerability scans.
    hidden ImageScanningConfiguration: (ImagePipelineImageScanningConfiguration)?

    /// The schedule of the image pipeline.
    hidden Schedule: (ImagePipelineSchedule)?

    /// The Amazon Resource Name (ARN) of the image recipe that defines how images are configured, tested, and assessed.
    hidden ImageRecipeArn: (String|Mapping)?

    /// The status of the image pipeline.
    hidden Status: (ImagePipelineStatus|Mapping)?

    /// The Amazon Resource Name (ARN) of the container recipe that defines how images are configured and tested.
    hidden ContainerRecipeArn: (String|Mapping)?

    /// Workflows to define the image build process
    hidden Workflows: (Listing<ImagePipelineWorkflowConfiguration>)?

    /// Collects additional information about the image being created, including the operating system (OS) version and package list.
    hidden EnhancedImageMetadataEnabled: (Boolean|Mapping)?

    /// The name of the image pipeline.
    hidden Name: (String|Mapping)?

    /// The description of the image pipeline.
    hidden Description: (String|Mapping)?

    /// The execution role name/ARN for the image build, if provided
    hidden ExecutionRole: (String|Mapping)?

    /// The tags of this image pipeline.
    hidden Tags: (ImagePipelineImagePipelineTags)?

    /// The image tests configuration of the image pipeline.
    hidden ImageTestsConfiguration: (ImagePipelineImageTestsConfiguration)?

    /// The Amazon Resource Name (ARN) of the distribution configuration associated with this image pipeline.
    hidden DistributionConfigurationArn: (String|Mapping)?

    Properties {
        ["InfrastructureConfigurationArn"] = if (InfrastructureConfigurationArn == null) null else InfrastructureConfigurationArn
        ["ImageScanningConfiguration"] = if (ImageScanningConfiguration == null) null else ImageScanningConfiguration
        ["Schedule"] = if (Schedule == null) null else Schedule
        ["ImageRecipeArn"] = if (ImageRecipeArn == null) null else ImageRecipeArn
        ["Status"] = if (Status == null) null else Status
        ["ContainerRecipeArn"] = if (ContainerRecipeArn == null) null else ContainerRecipeArn
        ["Workflows"] = if (Workflows == null) null else Workflows
        ["EnhancedImageMetadataEnabled"] = if (EnhancedImageMetadataEnabled == null) null else EnhancedImageMetadataEnabled
        ["Name"] = if (Name == null) null else Name
        ["Description"] = if (Description == null) null else Description
        ["ExecutionRole"] = if (ExecutionRole == null) null else ExecutionRole
        ["Tags"] = if (Tags == null) null else Tags
        ["ImageTestsConfiguration"] = if (ImageTestsConfiguration == null) null else ImageTestsConfiguration
        ["DistributionConfigurationArn"] = if (DistributionConfigurationArn == null) null else DistributionConfigurationArn
    }

}


typealias ImagePipelineStatus = "DISABLED"|"ENABLED"

typealias ImagePipelineImagePipelineTags = Mapping<String, Any>
