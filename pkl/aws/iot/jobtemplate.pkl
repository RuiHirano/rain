/// AWS::IoT::JobTemplate
///
/// Generated by rain build --pkl-class AWS::IoT::JobTemplate
module aws.iot.jobtemplate

import "../../cloudformation.pkl"

typealias JobTemplateIncrementFactor = Number|Mapping


/// Specifies a start time and duration for a scheduled Job.
open class JobTemplateMaintenanceWindow {
    StartTime: (String|Mapping)?
    DurationInMinutes: (Int|Mapping)?
}

/// The criteria that determine when and how a job abort takes place.
open class JobTemplateAbortCriteria {
    Action: JobTemplateAction
    FailureType: JobTemplateFailureType
    MinNumberOfExecutedThings: JobTemplateMinNumberOfExecutedThings
    ThresholdPercentage: JobTemplateThresholdPercentage
}

typealias JobTemplateMinNumberOfExecutedThings = Int|Mapping


/// 
open class JobTemplateRateIncreaseCriteria {
    NumberOfNotifiedThings: (JobTemplateNumberOfNotifiedThings)?
    NumberOfSucceededThings: (JobTemplateNumberOfSucceededThings)?
}

typealias JobTemplateFailureType = String|Mapping


typealias JobTemplateMaximumPerMinute = Int|Mapping


typealias JobTemplateExpiresInSec = Int|Mapping


typealias JobTemplateInProgressTimeoutInMinutes = Int|Mapping


typealias JobTemplateNumberOfSucceededThings = Int|Mapping


typealias JobTemplateRoleArn = String|Mapping


typealias JobTemplateDestinationPackageVersion = String|Mapping


typealias JobTemplateNumberOfNotifiedThings = Int|Mapping


typealias JobTemplateThresholdPercentage = Number|Mapping


typealias JobTemplateJobRetryFailureType = String|Mapping


/// A key-value pair to associate with a resource.
open class JobTemplateTag {
    Key: String|Mapping
    Value: String|Mapping
}

/// Specifies how many times a failure type should be retried.
open class JobTemplateRetryCriteria {
    NumberOfRetries: (Int|Mapping)?
    FailureType: (JobTemplateJobRetryFailureType)?
}

typealias JobTemplateBaseRatePerMinute = Int|Mapping


typealias JobTemplateAction = String|Mapping


/// Allows you to create an exponential rate of rollout for a job.
open class JobTemplateExponentialRolloutRate {
    BaseRatePerMinute: JobTemplateBaseRatePerMinute
    IncrementFactor: JobTemplateIncrementFactor
    RateIncreaseCriteria: Dynamic
}

/// Job templates enable you to preconfigure jobs so that you can deploy them to multiple sets of target devices.
open class JobTemplate extends cloudformation.Resource {

    Type = "AWS::IoT::JobTemplate"


    /// Allows you to create a staged rollout of a job.
    hidden JobExecutionsRolloutConfig: (Dynamic)?

    /// Specifies the amount of time each device has to finish its execution of the job.
    hidden TimeoutConfig: (Dynamic)?

    /// 
    hidden JobTemplateId: String(matches(Regex(#"[a-zA-Z0-9_-]+"#)))|Mapping

    /// A description of the Job Template.
    hidden Description: String(matches(Regex(#"[^\p{C}]+"#)))|Mapping

    /// An S3 link to the job document to use in the template. Required if you don't specify a value for document.
    hidden DocumentSource: (String|Mapping)?

    /// The criteria that determine when and how a job abort takes place.
    hidden AbortConfig: (Dynamic)?

    /// Configuration for pre-signed S3 URLs.
    hidden PresignedUrlConfig: (Dynamic)?

    /// 
    hidden MaintenanceWindows: (Listing<JobTemplateMaintenanceWindow>)?

    /// Optional for copying a JobTemplate from a pre-existing Job configuration.
    hidden JobArn: (String|Mapping)?

    /// 
    hidden JobExecutionsRetryConfig: (Dynamic)?

    /// 
    hidden DestinationPackageVersions: (Listing<JobTemplateDestinationPackageVersion>)?

    /// Metadata that can be used to manage the JobTemplate.
    hidden Tags: (Listing<JobTemplateTag>)?

    /// The job document. Required if you don't specify a value for documentSource.
    hidden Document: (String|Mapping)?

    Properties {
        ["JobExecutionsRolloutConfig"] = if (JobExecutionsRolloutConfig == null) null else JobExecutionsRolloutConfig
        ["TimeoutConfig"] = if (TimeoutConfig == null) null else TimeoutConfig
        ["JobTemplateId"] = if (JobTemplateId == null) null else JobTemplateId
        ["Description"] = if (Description == null) null else Description
        ["DocumentSource"] = if (DocumentSource == null) null else DocumentSource
        ["AbortConfig"] = if (AbortConfig == null) null else AbortConfig
        ["PresignedUrlConfig"] = if (PresignedUrlConfig == null) null else PresignedUrlConfig
        ["MaintenanceWindows"] = if (MaintenanceWindows == null) null else MaintenanceWindows
        ["JobArn"] = if (JobArn == null) null else JobArn
        ["JobExecutionsRetryConfig"] = if (JobExecutionsRetryConfig == null) null else JobExecutionsRetryConfig
        ["DestinationPackageVersions"] = if (DestinationPackageVersions == null) null else DestinationPackageVersions
        ["Tags"] = if (Tags == null) null else Tags
        ["Document"] = if (Document == null) null else Document
    }

}
