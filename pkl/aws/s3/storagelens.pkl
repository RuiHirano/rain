/// AWS::S3::StorageLens
///
/// Generated by rain build --pkl-class AWS::S3::StorageLens
module aws.s3.storagelens

import "../../cloudformation.pkl"

/// Enables activity metrics.
open class ActivityMetrics {
    IsEnabled: (Boolean|Mapping)?
}

/// Enables advanced data protection metrics.
open class AdvancedDataProtectionMetrics {
    IsEnabled: (Boolean|Mapping)?
}

/// Selection criteria for Storage Lens Group level metrics
open class StorageLensGroupSelectionCriteria {
    Include: (Listing<StorageLensGroupArn>)?
    Exclude: (Listing<StorageLensGroupArn>)?
}

typealias S3BucketDestinationOutputSchemaVersion = "V_1"

typealias S3BucketDestinationFormat = "CSV"|"Parquet"

/// S3 bucket destination settings for the Amazon S3 Storage Lens metrics export.
open class S3BucketDestination {
    Arn: String|Mapping
    Prefix: (String|Mapping)?
    Encryption: (Encryption)?
    OutputSchemaVersion: S3BucketDestinationOutputSchemaVersion|Mapping
    Format: S3BucketDestinationFormat|Mapping
    AccountId: String|Mapping
}

/// Specifies how Amazon S3 Storage Lens metrics should be exported.
open class DataExport {
    S3BucketDestination: (S3BucketDestination)?
    CloudWatchMetrics: (CloudWatchMetrics)?
}

/// Specifies the details of Amazon S3 Storage Lens configuration.
open class StorageLensConfiguration {
    AccountLevel: AccountLevel
    DataExport: (DataExport)?
    IsEnabled: Boolean|Mapping
    StorageLensArn: (String|Mapping)?
    Id: Id
    Include: (BucketsAndRegions)?
    Exclude: (BucketsAndRegions)?
    AwsOrg: (AwsOrg)?
}

/// The AWS Organizations ARN to use in the Amazon S3 Storage Lens configuration.
open class AwsOrg {
    Arn: Arn
}

/// Enables advanced cost optimization metrics.
open class AdvancedCostOptimizationMetrics {
    IsEnabled: (Boolean|Mapping)?
}

/// 
open class PrefixLevelStorageMetrics {
    IsEnabled: (Boolean|Mapping)?
    SelectionCriteria: (SelectionCriteria)?
}

/// Specifies the details of Amazon S3 Storage Lens Group configuration.
open class StorageLensGroupLevel {
    StorageLensGroupSelectionCriteria: (StorageLensGroupSelectionCriteria)?
}

/// Configures the server-side encryption for Amazon S3 Storage Lens report files with either S3-managed keys (SSE-S3) or KMS-managed keys (SSE-KMS).
open class Encryption {
}

/// CloudWatch metrics settings for the Amazon S3 Storage Lens metrics export.
open class CloudWatchMetrics {
    IsEnabled: Boolean|Mapping
}

/// The ID that identifies the Amazon S3 Storage Lens configuration.
open class Id {
}

/// Selection criteria for prefix-level metrics.
open class SelectionCriteria {
    MaxDepth: (Int|Mapping)?
    Delimiter: (String|Mapping)?
    MinStorageBytesPercentage: (Number|Mapping)?
}

/// Prefix-level metrics configurations.
open class PrefixLevel {
    StorageMetrics: PrefixLevelStorageMetrics
}

/// The ARN for the Amazon S3 Storage Lens Group configuration.
open class StorageLensGroupArn {
}

/// Account-level metrics configurations.
open class AccountLevel {
    BucketLevel: BucketLevel
    StorageLensGroupLevel: (StorageLensGroupLevel)?
    ActivityMetrics: (ActivityMetrics)?
    AdvancedCostOptimizationMetrics: (AdvancedCostOptimizationMetrics)?
    AdvancedDataProtectionMetrics: (AdvancedDataProtectionMetrics)?
    DetailedStatusCodesMetrics: (DetailedStatusCodesMetrics)?
}

/// AWS KMS server-side encryption.
open class SSEKMS {
    KeyId: String|Mapping
}

/// The Amazon Resource Name (ARN) of the specified resource.
open class Arn {
}

/// Enables detailed status codes metrics.
open class DetailedStatusCodesMetrics {
    IsEnabled: (Boolean|Mapping)?
}

/// Bucket-level metrics configurations.
open class BucketLevel {
    PrefixLevel: (PrefixLevel)?
    ActivityMetrics: (ActivityMetrics)?
    AdvancedCostOptimizationMetrics: (AdvancedCostOptimizationMetrics)?
    AdvancedDataProtectionMetrics: (AdvancedDataProtectionMetrics)?
    DetailedStatusCodesMetrics: (DetailedStatusCodesMetrics)?
}

/// 
open class Tag {
    Key: String(matches(Regex(#"^(?!aws:.*)[a-zA-Z0-9\s\_\.\/\=\+\-\@\:]+$"#)))|Mapping
    Value: String(matches(Regex(#"^(?!aws:.*)[a-zA-Z0-9\s\_\.\/\=\+\-\@\:]+$"#)))|Mapping
}

/// S3 buckets and Regions to include/exclude in the Amazon S3 Storage Lens configuration.
open class BucketsAndRegions {
    Regions: (Listing<String|Mapping>)?
    Buckets: (Listing<Arn>)?
}

/// The AWS::S3::StorageLens resource is an Amazon S3 resource type that you can use to create Storage Lens configurations.
open class StorageLens extends cloudformation.Resource {

    Type = "AWS::S3::StorageLens"


    /// 
    hidden StorageLensConfiguration: StorageLensConfiguration

    /// A set of tags (key-value pairs) for this Amazon S3 Storage Lens configuration.
    hidden Tags: (Listing<Tag>)?

    Properties {
        ["StorageLensConfiguration"] = if (StorageLensConfiguration == null) null else StorageLensConfiguration
        ["Tags"] = if (Tags == null) null else Tags
    }

}
