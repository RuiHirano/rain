/// AWS::VpcLattice::TargetGroup
///
/// Generated by rain build --pkl-class AWS::VpcLattice::TargetGroup
module aws.vpclattice.targetgroup

import "../../cloudformation.pkl"

/// 
open class Matcher {
    HttpCode: String(matches(Regex(#"^[0-9-,]+$"#)))|Mapping
}

typealias TargetGroupConfigProtocol = "HTTP"|"HTTPS"

typealias TargetGroupConfigProtocolVersion = "HTTP1"|"HTTP2"|"GRPC"

typealias TargetGroupConfigIpAddressType = "IPV4"|"IPV6"

typealias TargetGroupConfigLambdaEventStructureVersion = "V1"|"V2"

/// 
open class TargetGroupConfig {
    Port: (Int|Mapping)?
    Protocol: (TargetGroupConfigProtocol|Mapping)?
    ProtocolVersion: (TargetGroupConfigProtocolVersion|Mapping)?
    IpAddressType: (TargetGroupConfigIpAddressType|Mapping)?
    LambdaEventStructureVersion: (TargetGroupConfigLambdaEventStructureVersion|Mapping)?
    VpcIdentifier: (String(matches(Regex(#"^vpc-(([0-9a-z]{8})|([0-9a-z]{17}))$"#)))|Mapping)?
    HealthCheck: (HealthCheckConfig)?
}

/// 
open class Target {
    Id: String|Mapping
    Port: (Int|Mapping)?
}

/// 
open class Tag {
    Key: String|Mapping
    Value: String|Mapping
}

typealias HealthCheckConfigProtocol = "HTTP"|"HTTPS"

typealias HealthCheckConfigProtocolVersion = "HTTP1"|"HTTP2"|"GRPC"

/// 
open class HealthCheckConfig {
    Path: (String(matches(Regex(#"(^/[a-zA-Z0-9@:%_+.~#?&/=-]*$|(^$))"#)))|Mapping)?
    HealthCheckIntervalSeconds: (Int|Mapping)?
    HealthyThresholdCount: (Int|Mapping)?
    Matcher: (Matcher)?
    Port: (Int|Mapping)?
    Protocol: (HealthCheckConfigProtocol|Mapping)?
    ProtocolVersion: (HealthCheckConfigProtocolVersion|Mapping)?
    HealthCheckTimeoutSeconds: (Int|Mapping)?
    UnhealthyThresholdCount: (Int|Mapping)?
    Enabled: (Boolean|Mapping)?
}

/// A target group is a collection of targets, or compute resources, that run your application or service. A target group can only be used by a single service.
open class TargetGroup extends cloudformation.Resource {

    Type = "AWS::VpcLattice::TargetGroup"


    /// 
    hidden Config: (TargetGroupConfig)?

    /// 
    hidden TypeProperty: TargetGroupType|Mapping

    /// 
    hidden Tags: (Listing<Tag>)?

    /// 
    hidden Name: (String(matches(Regex(#"^(?!tg-)(?![-])(?!.*[-]$)(?!.*[-]{2})[a-z0-9-]+$"#)))|Mapping)?

    /// 
    hidden Targets: (Listing<Target>)?

    Properties {
        ["Config"] = if (Config == null) null else Config
        ["Type"] = if (TypeProperty == null) null else TypeProperty
        ["Tags"] = if (Tags == null) null else Tags
        ["Name"] = if (Name == null) null else Name
        ["Targets"] = if (Targets == null) null else Targets
    }

}


typealias TargetGroupType = "IP"|"LAMBDA"|"INSTANCE"|"ALB"
