import "cloudformation.pkl"

open class ReplicationRuleFilter {
    And: (ReplicationRuleAndOperator)?
    Prefix: (String|Mapping)?
    TagFilter: (TagFilter)?
}

open class ReplicationRuleAndOperator {
    Prefix: (String|Mapping)?
    TagFilters: (Listing<TagFilter>)?
}

open class NoncurrentVersionExpiration {
    NewerNoncurrentVersions: (Int|Mapping)?
    NoncurrentDays: Int|Mapping
}

typealias PartitionedPrefixPartitionDateSource = "EventTime"|"DeliveryTime"

open class PartitionedPrefix {
    PartitionDateSource: (PartitionedPrefixPartitionDateSource|Mapping)?
}

typealias DefaultRetentionMode = "COMPLIANCE"|"GOVERNANCE"

open class DefaultRetention {
    Years: (Int|Mapping)?
    Days: (Int|Mapping)?
    Mode: (DefaultRetentionMode|Mapping)?
}

typealias DeleteMarkerReplicationStatus = "Disabled"|"Enabled"

open class DeleteMarkerReplication {
    Status: (DeleteMarkerReplicationStatus|Mapping)?
}

open class ServerSideEncryptionRule {
    BucketKeyEnabled: (Boolean|Mapping)?
    ServerSideEncryptionByDefault: (ServerSideEncryptionByDefault)?
}

open class LambdaConfiguration {
    Event: String|Mapping
    Filter: (NotificationFilter)?
    Function: String|Mapping
}

open class ObjectLockConfiguration {
    ObjectLockEnabled: (String|Mapping)?
    Rule: (ObjectLockRule)?
}

open class ReplicationConfiguration {
    Role: String|Mapping
    Rules: Listing<ReplicationRule>
}

open class AbortIncompleteMultipartUpload {
    DaysAfterInitiation: Int|Mapping
}

open class LoggingConfiguration {
    DestinationBucketName: (String|Mapping)?
    LogFilePrefix: (String|Mapping)?
    TargetObjectKeyFormat: (TargetObjectKeyFormat)?
}

open class ObjectLockRule {
    DefaultRetention: (DefaultRetention)?
}

typealias ReplicationDestinationStorageClass = "DEEP_ARCHIVE"|"GLACIER"|"GLACIER_IR"|"INTELLIGENT_TIERING"|"ONEZONE_IA"|"REDUCED_REDUNDANCY"|"STANDARD"|"STANDARD_IA"

open class ReplicationDestination {
    Metrics: (Metrics)?
    ReplicationTime: (ReplicationTime)?
    StorageClass: (ReplicationDestinationStorageClass|Mapping)?
    AccessControlTranslation: (AccessControlTranslation)?
    Account: (String|Mapping)?
    Bucket: String|Mapping
    EncryptionConfiguration: (EncryptionConfiguration)?
}

typealias AccelerateConfigurationAccelerationStatus = "Enabled"|"Suspended"

open class AccelerateConfiguration {
    AccelerationStatus: AccelerateConfigurationAccelerationStatus|Mapping
}

open class AnalyticsConfiguration {
    TagFilters: (Listing<TagFilter>)?
    StorageClassAnalysis: StorageClassAnalysis
    Id: String|Mapping
    Prefix: (String|Mapping)?
}

typealias RuleStatus = "Enabled"|"Disabled"

open class Rule {
    ExpirationInDays: (Int|Mapping)?
    ExpiredObjectDeleteMarker: (Boolean|Mapping)?
    NoncurrentVersionTransitions: (Listing<NoncurrentVersionTransition>)?
    TagFilters: (Listing<TagFilter>)?
    ObjectSizeLessThan: (String(matches(Regex(#"[0-9]+"#)))|Mapping)?
    AbortIncompleteMultipartUpload: (AbortIncompleteMultipartUpload)?
    Id: (String|Mapping)?
    NoncurrentVersionExpirationInDays: (Int|Mapping)?
    NoncurrentVersionExpiration: (NoncurrentVersionExpiration)?
    Status: RuleStatus|Mapping
    ObjectSizeGreaterThan: (String(matches(Regex(#"[0-9]+"#)))|Mapping)?
    Transition: (Transition)?
    Transitions: (Listing<Transition>)?
    ExpirationDate: (iso8601UTC)?
    NoncurrentVersionTransition: (NoncurrentVersionTransition)?
    Prefix: (String|Mapping)?
}

open class CorsConfiguration {
    CorsRules: Listing<CorsRule>
}

typealias TieringAccessTier = "ARCHIVE_ACCESS"|"DEEP_ARCHIVE_ACCESS"

open class Tiering {
    AccessTier: TieringAccessTier|Mapping
    Days: Int|Mapping
}

open class S3KeyFilter {
    Rules: Listing<FilterRule>
}

typealias ReplicaModificationsStatus = "Enabled"|"Disabled"

open class ReplicaModifications {
    Status: ReplicaModificationsStatus|Mapping
}

open class NotificationConfiguration {
    EventBridgeConfiguration: (EventBridgeConfiguration)?
    LambdaConfigurations: (Listing<LambdaConfiguration>)?
    QueueConfigurations: (Listing<QueueConfiguration>)?
    TopicConfigurations: (Listing<TopicConfiguration>)?
}

open class EventBridgeConfiguration {
    EventBridgeEnabled: Boolean|Mapping
}

open class QueueConfiguration {
    Event: String|Mapping
    Filter: (NotificationFilter)?
    Queue: String|Mapping
}

typealias OwnershipControlsRuleObjectOwnership = "ObjectWriter"|"BucketOwnerPreferred"|"BucketOwnerEnforced"

open class OwnershipControlsRule {
    ObjectOwnership: (OwnershipControlsRuleObjectOwnership|Mapping)?
}

typealias RedirectAllRequestsToProtocol = "http"|"https"

open class RedirectAllRequestsTo {
    HostName: String|Mapping
    Protocol: (RedirectAllRequestsToProtocol|Mapping)?
}

typealias IntelligentTieringConfigurationStatus = "Disabled"|"Enabled"

open class IntelligentTieringConfiguration {
    Tierings: Listing<Tiering>
    Id: String|Mapping
    Prefix: (String|Mapping)?
    Status: IntelligentTieringConfigurationStatus|Mapping
    TagFilters: (Listing<TagFilter>)?
}

open class ReplicationTimeValue {
    Minutes: Int|Mapping
}

typealias ReplicationRuleStatus = "Disabled"|"Enabled"

open class ReplicationRule {
    Destination: ReplicationDestination
    Filter: (ReplicationRuleFilter)?
    Id: (String|Mapping)?
    Prefix: (String|Mapping)?
    Priority: (Int|Mapping)?
    SourceSelectionCriteria: (SourceSelectionCriteria)?
    Status: ReplicationRuleStatus|Mapping
    DeleteMarkerReplication: (DeleteMarkerReplication)?
}

typealias MetricsStatus = "Disabled"|"Enabled"

open class Metrics {
    Status: MetricsStatus|Mapping
    EventThreshold: (ReplicationTimeValue)?
}

open class SourceSelectionCriteria {
    ReplicaModifications: (ReplicaModifications)?
    SseKmsEncryptedObjects: (SseKmsEncryptedObjects)?
}

open class WebsiteConfiguration {
    ErrorDocument: (String|Mapping)?
    IndexDocument: (String|Mapping)?
    RoutingRules: (Listing<RoutingRule>)?
    RedirectAllRequestsTo: (RedirectAllRequestsTo)?
}

open class TagFilter {
    Value: String|Mapping
    Key: String|Mapping
}

open class BucketEncryption {
    ServerSideEncryptionConfiguration: Listing<ServerSideEncryptionRule>
}

open class RoutingRule {
    RedirectRule: RedirectRule
    RoutingRuleCondition: (RoutingRuleCondition)?
}

typealias ServerSideEncryptionByDefaultSSEAlgorithm = "aws:kms"|"AES256"|"aws:kms:dsse"

open class ServerSideEncryptionByDefault {
    SSEAlgorithm: ServerSideEncryptionByDefaultSSEAlgorithm|Mapping
    KMSMasterKeyID: (String|Mapping)?
}

open class NotificationFilter {
    S3Key: S3KeyFilter
}

open class LifecycleConfiguration {
    Rules: Listing<Rule>
}

open class PublicAccessBlockConfiguration {
    RestrictPublicBuckets: (Boolean|Mapping)?
    BlockPublicAcls: (Boolean|Mapping)?
    BlockPublicPolicy: (Boolean|Mapping)?
    IgnorePublicAcls: (Boolean|Mapping)?
}

open class Tag {
    Key: String|Mapping
    Value: String|Mapping
}

typealias RedirectRuleProtocol = "http"|"https"

open class RedirectRule {
    Protocol: (RedirectRuleProtocol|Mapping)?
    ReplaceKeyPrefixWith: (String|Mapping)?
    ReplaceKeyWith: (String|Mapping)?
    HostName: (String|Mapping)?
    HttpRedirectCode: (String|Mapping)?
}

open class StorageClassAnalysis {
    DataExport: (DataExport)?
}

typealias InventoryConfigurationIncludedObjectVersions = "All"|"Current"

typealias InventoryConfigurationOptionalFields = "Size"|"LastModifiedDate"|"StorageClass"|"ETag"|"IsMultipartUploaded"|"ReplicationStatus"|"EncryptionStatus"|"ObjectLockRetainUntilDate"|"ObjectLockMode"|"ObjectLockLegalHoldStatus"|"IntelligentTieringAccessTier"|"BucketKeyStatus"|"ChecksumAlgorithm"|"ObjectAccessControlList"|"ObjectOwner"

typealias InventoryConfigurationScheduleFrequency = "Daily"|"Weekly"

open class InventoryConfiguration {
    Destination: Destination
    Enabled: Boolean|Mapping
    Id: String|Mapping
    IncludedObjectVersions: InventoryConfigurationIncludedObjectVersions|Mapping
    OptionalFields: (Listing<InventoryConfigurationOptionalFields|Mapping>)?
    Prefix: (String|Mapping)?
    ScheduleFrequency: InventoryConfigurationScheduleFrequency|Mapping
}

typealias VersioningConfigurationStatus = "Enabled"|"Suspended"

open class VersioningConfiguration {
    Status: VersioningConfigurationStatus|Mapping
}

open class iso8601UTC {
}

open class MetricsConfiguration {
    AccessPointArn: (String|Mapping)?
    Id: String|Mapping
    Prefix: (String|Mapping)?
    TagFilters: (Listing<TagFilter>)?
}

open class RoutingRuleCondition {
    HttpErrorCodeReturnedEquals: (String|Mapping)?
    KeyPrefixEquals: (String|Mapping)?
}

open class FilterRule {
    Name: String|Mapping
    Value: String|Mapping
}

open class AccessControlTranslation {
    Owner: String|Mapping
}

typealias SseKmsEncryptedObjectsStatus = "Disabled"|"Enabled"

open class SseKmsEncryptedObjects {
    Status: SseKmsEncryptedObjectsStatus|Mapping
}

typealias DestinationFormat = "CSV"|"ORC"|"Parquet"

open class Destination {
    BucketArn: String|Mapping
    BucketAccountId: (String|Mapping)?
    Format: DestinationFormat|Mapping
    Prefix: (String|Mapping)?
}

typealias ReplicationTimeStatus = "Disabled"|"Enabled"

open class ReplicationTime {
    Status: ReplicationTimeStatus|Mapping
    Time: ReplicationTimeValue
}

open class EncryptionConfiguration {
    ReplicaKmsKeyID: String|Mapping
}

typealias TransitionStorageClass = "DEEP_ARCHIVE"|"GLACIER"|"Glacier"|"GLACIER_IR"|"INTELLIGENT_TIERING"|"ONEZONE_IA"|"STANDARD_IA"

open class Transition {
    StorageClass: TransitionStorageClass|Mapping
    TransitionDate: (iso8601UTC)?
    TransitionInDays: (Int|Mapping)?
}

open class TargetObjectKeyFormat {
}

typealias NoncurrentVersionTransitionStorageClass = "DEEP_ARCHIVE"|"GLACIER"|"Glacier"|"GLACIER_IR"|"INTELLIGENT_TIERING"|"ONEZONE_IA"|"STANDARD_IA"

open class NoncurrentVersionTransition {
    NewerNoncurrentVersions: (Int|Mapping)?
    StorageClass: NoncurrentVersionTransitionStorageClass|Mapping
    TransitionInDays: Int|Mapping
}

open class TopicConfiguration {
    Topic: String|Mapping
    Event: String|Mapping
    Filter: (NotificationFilter)?
}

open class OwnershipControls {
    Rules: Listing<OwnershipControlsRule>
}

open class Arn {
}

open class DataExport {
    Destination: Destination
    OutputSchemaVersion: String|Mapping
}

typealias CorsRuleAllowedMethods = "GET"|"PUT"|"HEAD"|"POST"|"DELETE"

open class CorsRule {
    MaxAge: (Int|Mapping)?
    AllowedHeaders: (Listing<String|Mapping>)?
    AllowedMethods: Listing<CorsRuleAllowedMethods|Mapping>
    AllowedOrigins: Listing<String|Mapping>
    ExposedHeaders: (Listing<String|Mapping>)?
    Id: (String|Mapping)?
}

open class Bucket extends cloudformation.Resource {

    Type = "AWS::S3::Bucket"

    hidden CorsConfiguration: (CorsConfiguration)?
    hidden NotificationConfiguration: (NotificationConfiguration)?
    hidden ObjectLockEnabled: (Boolean|Mapping)?
    hidden Tags: (Listing<Tag>)?
    hidden IntelligentTieringConfigurations: (Listing<IntelligentTieringConfiguration>)?
    hidden InventoryConfigurations: (Listing<InventoryConfiguration>)?
    hidden MetricsConfigurations: (Listing<MetricsConfiguration>)?
    hidden VersioningConfiguration: (VersioningConfiguration)?
    hidden AnalyticsConfigurations: (Listing<AnalyticsConfiguration>)?
    hidden WebsiteConfiguration: (WebsiteConfiguration)?
    hidden ReplicationConfiguration: (ReplicationConfiguration)?
    hidden BucketName: (String(matches(Regex(#"^[a-z0-9][a-z0-9//.//-]*[a-z0-9]$"#)))|Mapping)?
    hidden ObjectLockConfiguration: (ObjectLockConfiguration)?
    hidden OwnershipControls: (OwnershipControls)?
    hidden PublicAccessBlockConfiguration: (PublicAccessBlockConfiguration)?
    hidden AccessControl: (BucketAccessControl|Mapping)?
    hidden AccelerateConfiguration: (AccelerateConfiguration)?
    hidden LoggingConfiguration: (LoggingConfiguration)?
    hidden LifecycleConfiguration: (LifecycleConfiguration)?
    hidden BucketEncryption: (BucketEncryption)?

    Properties {
        ["CorsConfiguration"] = if (CorsConfiguration == null) null else CorsConfiguration
        ["NotificationConfiguration"] = if (NotificationConfiguration == null) null else NotificationConfiguration
        ["ObjectLockEnabled"] = if (ObjectLockEnabled == null) null else ObjectLockEnabled
        ["Tags"] = if (Tags == null) null else Tags
        ["IntelligentTieringConfigurations"] = if (IntelligentTieringConfigurations == null) null else IntelligentTieringConfigurations
        ["InventoryConfigurations"] = if (InventoryConfigurations == null) null else InventoryConfigurations
        ["MetricsConfigurations"] = if (MetricsConfigurations == null) null else MetricsConfigurations
        ["VersioningConfiguration"] = if (VersioningConfiguration == null) null else VersioningConfiguration
        ["AnalyticsConfigurations"] = if (AnalyticsConfigurations == null) null else AnalyticsConfigurations
        ["WebsiteConfiguration"] = if (WebsiteConfiguration == null) null else WebsiteConfiguration
        ["ReplicationConfiguration"] = if (ReplicationConfiguration == null) null else ReplicationConfiguration
        ["BucketName"] = if (BucketName == null) null else BucketName
        ["ObjectLockConfiguration"] = if (ObjectLockConfiguration == null) null else ObjectLockConfiguration
        ["OwnershipControls"] = if (OwnershipControls == null) null else OwnershipControls
        ["PublicAccessBlockConfiguration"] = if (PublicAccessBlockConfiguration == null) null else PublicAccessBlockConfiguration
        ["AccessControl"] = if (AccessControl == null) null else AccessControl
        ["AccelerateConfiguration"] = if (AccelerateConfiguration == null) null else AccelerateConfiguration
        ["LoggingConfiguration"] = if (LoggingConfiguration == null) null else LoggingConfiguration
        ["LifecycleConfiguration"] = if (LifecycleConfiguration == null) null else LifecycleConfiguration
        ["BucketEncryption"] = if (BucketEncryption == null) null else BucketEncryption
    }

}


typealias BucketAccessControl = "AuthenticatedRead"|"AwsExecRead"|"BucketOwnerFullControl"|"BucketOwnerRead"|"LogDeliveryWrite"|"Private"|"PublicRead"|"PublicReadWrite"
